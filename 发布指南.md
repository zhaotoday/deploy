# 发布指南

## 项目概述

这是一个基于 TypeScript + Vite 构建的 SSH 部署工具 npm 包，所有日志和文档已本地化为中文。

## 项目结构

```
ssh-deploy-cli/
├── src/
│   ├── types.ts      # TypeScript 类型定义
│   ├── deployer.ts   # 核心部署类（中文日志）
│   ├── index.ts      # 主入口文件（中文注释）
│   └── cli.ts        # CLI 命令行工具（中文帮助）
├── dist/             # 构建输出目录
│   ├── *.js          # CommonJS 格式
│   ├── *.mjs         # ES Module 格式
│   └── *.d.ts        # TypeScript 类型定义
├── deploy.config.example.js  # 配置文件示例（中文注释）
├── package.json      # 包配置
├── README.md         # 使用文档（中文）
└── 其他配置文件...
```

## 中文化完成情况

✅ **README.md** - 完全中文化  
✅ **配置文件示例** - 中文注释  
✅ **CLI 帮助信息** - 中文界面  
✅ **部署日志** - 中文输出  
✅ **错误信息** - 中文提示  
✅ **预设命令模板** - 中文描述  

## 发布前准备

1. **构建项目**
   ```bash
   npm run build
   ```

2. **检查构建结果**
   ```bash
   ls dist/
   # 应该包含:
   # - cli.js, cli.mjs (CLI工具)
   # - index.js, index.mjs (主入口)
   # - *.d.ts (类型定义文件)
   ```

3. **更新版本号**
   ```bash
   npm version patch  # 或 minor, major
   ```

## 发布到 npm

```bash
# 登录 npm (如果还没登录)
npm login

# 发布
npm publish
```

## 使用示例

### 全局安装使用
```bash
npm install -g ssh-deploy-cli
ssh-deploy --help  # 显示中文帮助
```

### 项目中使用
```bash
npm install ssh-deploy-cli
```

```javascript
import { SSHDeployer, defaultCommands } from 'ssh-deploy-cli';

const config = {
  ssh: { host: 'server.com', username: 'user', privateKey: '/path/key' },
  projectPath: '/var/www/project',
  commands: defaultCommands.pnpm // 中文描述的预设命令
};

const deployer = new SSHDeployer(config, { verbose: true });
await deployer.deploy(); // 输出中文日志
```

## 特性

- ✅ 完全中文化界面
- ✅ TypeScript 支持
- ✅ ESM + CommonJS 双格式输出
- ✅ CLI 工具和编程式 API
- ✅ 可配置的部署命令
- ✅ 实时中文日志输出
- ✅ 干运行模式

## 配置灵活性

用户可以完全自定义部署命令，支持：
- 前端项目 (npm/pnpm/yarn)
- Docker 项目  
- 任意自定义命令序列

所有命令描述都支持中文，提供更好的用户体验。